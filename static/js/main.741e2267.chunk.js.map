{"version":3,"sources":["example/App.js","HandleCheckboxHOC.jsx","index.js"],"names":["createDummyArray","arraySize","dummyData","value","dummyvalue","push","fName","lName","username","id","handleCheckbox","PassedComponent","Configuration","state","checkedItems","isShiftKeyPressed","checkboxKey","totalItems","lastCheckedItem","updateTotalItems","totalData","uncheckAll","setState","checkAll","length","newCheckedItems","getKeyToCheck","keyUpDownListener","event","isKeyUpEvent","keyCode","addOrDeleteCheckedItem","currentChecked","isElementExist","isExist","elementIndex","splice","updateCheckedItems","isCurrentCheckedIdExistObject","isCheckedElementExist","isLastCheckedIdExistObject","lastCheckedIndex","lastCheckedExist","getCheckedId","indexToStart","Math","min","indexToEnd","max","getUpdatedShiftItems","checkedItemsCount","data","checkedValue","key","some","index","isShiftHandlingRequired","isShiftRequired","this","document","addEventListener","props","removeEventListener","PureComponent","dummyArray","isCheckboxValueExist","handleChange","isAll","Table","striped","bordered","hover","type","name","checked","onChange","map","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.741e2267.chunk.js","sourcesContent":["//@flow\n\nimport React, { PureComponent } from 'react';\nimport Table from 'react-bootstrap/Table';\n\nimport './App.css';\nimport  handleCheckbox  from '../HandleCheckboxHOC';\n\nfunction createDummyArray(arraySize) {\n  \n  let dummyData = [];\n\n  for(let value = 0 ; value < arraySize ;value ++) {\n\n    let dummyvalue = \"Test\" + value;\n\n    dummyData.push ({\n      fName: dummyvalue,\n      lName: dummyvalue,\n      username: dummyvalue,\n      id: value,\n    });\n  }\n\n  return dummyData;\n}\n\ntype Props = {\n\n  checkedItems: Array<Object>,\n  uncheckAll: () => void,\n  checkAll: () => void,\n  updateCheckedItems: (checkedItems: Object) => void,\n  updateTotalItems: (totalData: Array<Object>) => void\n}\n\nclass App extends PureComponent<Props,{}> {\n\n  dummyArray = createDummyArray(6);\n\n  componentDidMount() {\n    this.props.updateTotalItems(this.dummyArray);\n  }\n\n  componentDidUpdate() {\n   // this.props.updateTotalItems(this.dummyArray);\n\n  }\n\n  render() {\n   \n    return (\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>First Name</th>\n            <th>Last Name</th>\n            <th>Username</th>\n          </tr>\n        </thead>\n    \n        <tbody>\n          <tr key={\"All\"}>\n            <td>\n              <input type=\"checkbox\" id={\"All\"} name={\"All\"} checked={this.props.checkedItems.length === this.dummyArray.length} onChange={() => this.handleChange(null, true)}/>\n            </td>\n            <td>{\"All\"}</td>\n            <td>{\"All\"}</td>\n            <td>{\"All\"}</td>\n          </tr>\n    \n          {\n            this.dummyArray.map((data,index) =>{\n              return (\n                <tr key={index}>\n                  <td>\n                    <input type=\"checkbox\" id={index} name={index} checked={this.isCheckboxValueExist(index)} onChange={() => this.handleChange(data)}/>\n                  </td>\n                  <td>{data.fName}</td>\n                  <td>{data.lName}</td>\n                  <td>{data.username}</td>\n                </tr>\n              )\n            \n            })\n          }\n        \n        </tbody>\n    \n      </Table>\n    );\n\n  }\n\n  isCheckboxValueExist = (index: number) => {\n\n    return this.props.checkedItems.some((data) => {\n      return data.id === this.dummyArray[index].id\n    });\n  }\n\n  handleChange = (data: Object, isAll: boolean = false) => {\n    if(isAll && this.props.checkedItems.length !== this.dummyArray.length)\n      this.props.checkAll();\n    else if( isAll )\n      this.props.uncheckAll();\n    else\n      this.props.updateCheckedItems(data)\n  }\n  \n}\n\nexport default handleCheckbox(App,{checkboxKey: 'id', isShiftRequired: true})\n\n","//@flow\r\n\r\nimport React, { PureComponent, type ComponentType } from \"react\";\r\n\r\nconst SHIFT_CODE = 16;\r\nconst CHECK_KEY = \"CHECK_KEY\";\r\n\r\nexport default function handleCheckbox<Props>(PassedComponent: ComponentType<Props>,Configuration: Object = {}) {\r\n\r\n    type State = {\r\n        checkedItems: Array<Object | string>\r\n    };\r\n\r\n    return class CheckedDataHandling extends PureComponent<Props,State> {\r\n\r\n        state = {\r\n            checkedItems: [], // checked data\r\n        };\r\n\r\n        isShiftKeyPressed = false;\r\n        checkboxKey = null;\r\n        totalItems = [];\r\n        lastCheckedItem = null;\r\n\r\n        componentDidMount() {\r\n\r\n            this.checkboxKey = this.getKeyToCheck();\r\n\r\n            // To add listeners if shift is required\r\n\r\n            if(this.isShiftHandlingRequired()) {\r\n                document.addEventListener(\"keydown\", (event: Object) => this.keyUpDownListener(event,true));\r\n                document.addEventListener(\"keyup\", (event: Object) => this.keyUpDownListener(event,false));\r\n            }\r\n            \r\n\r\n        }\r\n\r\n        render() {\r\n            \r\n            const { checkedItems  } = this.state;\r\n\r\n            return (\r\n                <PassedComponent\r\n                    checkedItems={checkedItems}\r\n                    uncheckAll={this.uncheckAll}\r\n                    checkAll={this.checkAll}\r\n                    updateCheckedItems={this.updateCheckedItems}\r\n                    updateTotalItems={this.updateTotalItems}\r\n                    {...this.props}\r\n                />\r\n\r\n            );\r\n\r\n        }\r\n\r\n        componentWillUnmount() {\r\n\r\n            if(this.isShiftHandlingRequired()) {\r\n                document.removeEventListener(\"keydown\", (event: Object) => this.keyUpDownListener(event,true));\r\n                document.removeEventListener(\"keyup\", (event: Object) => this.keyUpDownListener(event,false));\r\n            }\r\n\r\n        }\r\n\r\n        updateTotalItems = (totalData: Array<Object | string>) => {\r\n            this.totalItems = [...totalData];\r\n        }\r\n\r\n        /**\r\n         *  To uncheck all checkboxes\r\n         */\r\n        uncheckAll = () => {\r\n\r\n            this.lastCheckedItem = null;\r\n\r\n            this.setState({\r\n                checkedItems: []\r\n            });\r\n\r\n        }\r\n        \r\n        /**\r\n         * To check all checkboxes\r\n         */\r\n        checkAll = () => {\r\n\r\n            if(this.totalItems && this.totalItems.length > 0) {\r\n\r\n                let newCheckedItems = [...this.totalItems];\r\n                this.lastCheckedItem = null;\r\n    \r\n                this.setState({\r\n                  checkedItems: newCheckedItems\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * To get key tocheck in checkbox\r\n         */\r\n        getKeyToCheck = () => {\r\n\r\n            if(typeof(this.totalItems[0]) === \"string\")\r\n                return null;\r\n            else {\r\n                \r\n                const { checkboxKey } = Configuration;\r\n\r\n                if(checkboxKey)\r\n                    return checkboxKey;\r\n\r\n            }\r\n\r\n            return CHECK_KEY;\r\n\r\n        }\r\n\r\n        /**\r\n         * Adding key down listener\r\n         */\r\n        keyUpDownListener = (event: Object,isKeyUpEvent: boolean) => {\r\n\r\n            if(event.keyCode !== SHIFT_CODE)\r\n                return;\r\n            \r\n            this.isShiftKeyPressed = isKeyUpEvent;\r\n\r\n        }\r\n\r\n        /**\r\n         * To add or delete element from checked data\r\n        */\r\n\r\n        addOrDeleteCheckedItem = (checkedItems: Array<Object | string>, currentChecked ?:Object, isElementExist: Object) => {\r\n\r\n            let newCheckedItems = [...checkedItems];\r\n\r\n            const { isExist, elementIndex } = isElementExist;\r\n             \r\n            if(isExist)\r\n                newCheckedItems.splice(elementIndex,1);\r\n            else\r\n                newCheckedItems.push(currentChecked);\r\n\r\n            return newCheckedItems;\r\n        }\r\n\r\n\r\n        /**\r\n         * To update the checked data\r\n         */\r\n        updateCheckedItems = (currentChecked: Object| string) => {\r\n\r\n            const { checkedItems } = this.state;\r\n\r\n            let newCheckedItems = [...checkedItems];\r\n\r\n            if(this.lastCheckedItem) {\r\n\r\n                const isCurrentCheckedIdExistObject = this.isCheckedElementExist(this.state.checkedItems,currentChecked);\r\n\r\n                if(this.isShiftKeyPressed) {\r\n\r\n                    const isLastCheckedIdExistObject = this.isCheckedElementExist(this.state.checkedItems,this.lastCheckedItem);\r\n                    const lastCheckedIndex = isLastCheckedIdExistObject.elementIndex;\r\n                    const lastCheckedExist = isLastCheckedIdExistObject.isExist;\r\n\r\n                    if(this.getCheckedId(currentChecked) === this.getCheckedId(this.lastCheckedItem))\r\n                        newCheckedItems = this.addOrDeleteCheckedItem(newCheckedItems,currentChecked,isLastCheckedIdExistObject);\r\n                    else {\r\n\r\n                        // Remove all\r\n                        if(lastCheckedExist && isCurrentCheckedIdExistObject.isExist) {        \r\n                            const indexToStart = Math.min(isCurrentCheckedIdExistObject.elementIndex,lastCheckedIndex);\r\n                            const indexToEnd = Math.max(isCurrentCheckedIdExistObject.elementIndex,lastCheckedIndex);\r\n                            newCheckedItems.splice(indexToStart, (indexToEnd - indexToStart + 1));\r\n                        }\r\n\r\n                        else {\r\n\r\n                            // Iterate to add or remove element between them\r\n\r\n                            newCheckedItems = this.getUpdatedShiftItems(currentChecked,lastCheckedExist,isCurrentCheckedIdExistObject);\r\n                            \r\n                        }\r\n                    }\r\n\r\n                }\r\n                else \r\n                    newCheckedItems = this.addOrDeleteCheckedItem(newCheckedItems,currentChecked,isCurrentCheckedIdExistObject);\r\n\r\n            }\r\n            else \r\n                newCheckedItems.push(currentChecked);\r\n\r\n\r\n            this.setState({\r\n                checkedItems: newCheckedItems,\r\n            });\r\n\r\n            this.lastCheckedItem = currentChecked;\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * To get data in case of shift key pressed\r\n         */\r\n        getUpdatedShiftItems = (currentChecked:  Object | string,lastCheckedExist: boolean,isCurrentCheckedIdExistObject: Object ) => {\r\n\r\n            let checkedItemsCount = 0;\r\n            let newCheckedItems = [...this.state.checkedItems];\r\n\r\n            for (let data of this.totalItems) {\r\n\r\n                if(this.getCheckedId(data) === this.getCheckedId(currentChecked) || this.getCheckedId(data) === this.getCheckedId(this.lastCheckedItem))\r\n                    checkedItemsCount += 1;\r\n\r\n                if(checkedItemsCount > 0) {\r\n\r\n                    const { isExist, elementIndex } = this.isCheckedElementExist(newCheckedItems,data);\r\n\r\n                    if(!lastCheckedExist && isCurrentCheckedIdExistObject.isExist) {\r\n\r\n                        if(isExist)\r\n                            newCheckedItems.splice(elementIndex,1);\r\n                    }\r\n                    \r\n                    else {\r\n                        if(!isExist)\r\n                            newCheckedItems.push(data);\r\n                    }\r\n\r\n                }\r\n                   \r\n                if(checkedItemsCount === 2)\r\n                    break;\r\n\r\n            }\r\n\r\n            return newCheckedItems;\r\n\r\n        }\r\n\r\n        /**\r\n         * To get the checked id\r\n         */\r\n        getCheckedId = (checkedValue ?: Object) => {\r\n\r\n            const key  = this.checkboxKey;\r\n\r\n            if(key && typeof(checkedValue) === \"object\")\r\n                return checkedValue[key];\r\n\r\n            return checkedValue;\r\n\r\n        }\r\n\r\n        /**\r\n         * To check if element exist or not\r\n         */\r\n        isCheckedElementExist = (checkedItems: Array<Object | string> ,currentChecked ?: Object) => {\r\n\r\n            let elementIndex = -1;\r\n\r\n            const isExist  = checkedItems.some((data,index) => {\r\n\r\n                elementIndex = index;\r\n                return (this.getCheckedId(data) === this.getCheckedId(currentChecked))\r\n            });\r\n\r\n            const elementExistObject = {\r\n                isExist,\r\n                elementIndex\r\n            };\r\n\r\n            return elementExistObject;\r\n\r\n        }\r\n\r\n        isShiftHandlingRequired = () => {\r\n\r\n            const { isShiftRequired } = Configuration;\r\n    \r\n            if(isShiftRequired)\r\n                return true;\r\n    \r\n            return false;\r\n    \r\n    \r\n        }\r\n\r\n    }\r\n    \r\n    \r\n\r\n\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './example/App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}